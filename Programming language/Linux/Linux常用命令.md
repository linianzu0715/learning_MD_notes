[toc]



## Linux 常用操作命令大全

#### Linux系统的文件结构

```
/bin        二进制文件，系统常规命令
/boot       系统启动分区，系统启动时读取的文件
/dev        设备文件
/etc        大多数配置文件
/home       普通用户的家目录
/lib        32位函数库
/lib64      64位库
/media      手动临时挂载点
/mnt        手动临时挂载点
/opt        第三方软件安装位置
/proc       进程信息及硬件信息
/root       临时设备的默认挂载点
/sbin       系统管理命令
/srv        数据
/var        数据
/sys        内核相关信息
/tmp        临时文件
/usr        用户相关设定
```

#### Linux系统命令行的含义

```
示例：root@app00:~# 
root    //用户名，root为超级用户
@       //分隔符
app00   //主机名称
~       //当前所在目录，默认用户目录为~，会随着目录切换而变化，例如：（root@app00:/bin# ，当前位置在bin目录下）
#       //表示当前用户是超级用户，普通用户为$，例如：（"yao@app00:/root$" ，表示使用用户"yao"访问/root文件夹）
```

#### 命令的组成

```
示例：命令 参数名 参数值
```



### 基础操作

#### 关闭系统

```
(1)立刻关机
  shutdown -h now 或者 poweroff
(2)两分钟后关机
  shutdown -h 2
```

#### 关闭系统

```
(1)立刻重启
  shutdown -r now 或者 reboot
(2)两分钟后重启
  shutdown -r 2
```

#### 帮助命令（help)

```
ifconfig  --help     //查看 ifconfig 命令的用法
```

#### 命令说明书（man)

```
man shutdown         //打开命令说明后，可按"q"键退出
```

#### 切换用户（su）

```
su yao               //切换为用户"yao",输入后回车需要输入该用户的密码
exit                 //退出当前用户
```



### 目录操作

#### 切换目录（cd）

```
cd /                 //切换到根目录
cd /bin              //切换到根目录下的bin目录
cd ../               //切换到上一级目录 或者使用命令：cd ..
cd ~                 //切换到home目录
cd -                 //切换到上次访问的目录
cd xx(文件夹名)       //切换到本目录下的名为xx的文件目录，如果目录不存在报错
cd /xxx/xx/x         //可以输入完整的路径，直接切换到目标目录，输入过程中可以使用tab键快速补全
```

#### 查看目录（ls）

```
ls                   //查看当前目录下的所有目录和文件
ls -a                //查看当前目录下的所有目录和文件（包括隐藏的文件）
ls -l                //列表查看当前目录下的所有目录和文件（列表查看，显示更多信息），与命令"ll"效果一样
ls /bin              //查看指定目录下的所有目录和文件 
```

#### 创建目录（mkdir）

```
mkdir tools          //在当前目录下创建一个名为tools的目录
mkdir /bin/tools     //在指定目录下创建一个名为tools的目录
```

#### 删除目录与文件（rm）

```
rm 文件名              //删除当前目录下的文件
rm -f 文件名           //删除当前目录的的文件（不询问）
rm -r 文件夹名         //递归删除当前目录下此名的目录
rm -rf 文件夹名        //递归删除当前目录下此名的目录（不询问）
rm -rf *              //将当前目录下的所有目录和文件全部删除
rm -rf /*             //将根目录下的所有文件全部删除【慎用！相当于格式化系统】
```

#### 修改目录（mv）

```
mv 当前目录名 新目录名        //修改目录名，同样适用与文件操作
mv /usr/tmp/tool /opt       //将/usr/tmp目录下的tool目录剪切到 /opt目录下面
mv -r /usr/tmp/tool /opt    //递归剪切目录中所有文件和文件夹
```

#### 拷贝目录（cp）

```
cp /usr/tmp/tool /opt       //将/usr/tmp目录下的tool目录复制到 /opt目录下面
cp -r /usr/tmp/tool /opt    //递归剪复制目录中所有文件和文件夹
```

#### 搜索目录（find）

```
find /bin -name 'a*'        //查找/bin目录下的所有以a开头的文件或者目录
```

#### 查看当前目录（pwd）

```
pwd                         //显示当前位置路径
```



### 文件操作

#### 新增文件（touch）

```
touch  a.txt         //在当前目录下创建名为a的txt文件（文件不存在），如果文件存在，将文件时间属性修改为当前系统时间
```

#### 删除文件（rm）

```
rm 文件名              //删除当前目录下的文件
rm -f 文件名           //删除当前目录的的文件（不询问）
```

#### 编辑文件（vi、vim）

```
vi 文件名              //打开需要编辑的文件
--进入后，操作界面有三种模式：命令模式（command mode）、插入模式（Insert mode）和底行模式（last line mode）
命令模式
-刚进入文件就是命令模式，通过方向键控制光标位置，
-使用命令"dd"删除当前整行
-使用命令"/字段"进行查找
-按"i"在光标所在字符前开始插入
-按"a"在光标所在字符后开始插入
-按"o"在光标所在行的下面另起一新行插入
-按"："进入底行模式
插入模式
-此时可以对文件内容进行编辑，左下角会显示 "-- 插入 --""
-按"ESC"进入底行模式
底行模式
-退出编辑：      :q
-强制退出：      :q!
-保存并退出：    :wq
## 操作步骤示例 ##
1.保存文件：按"ESC" -> 输入":" -> 输入"wq",回车     //保存并退出编辑
2.取消操作：按"ESC" -> 输入":" -> 输入"q!",回车     //撤销本次修改并退出编辑
## 补充 ##
vim +10 filename.txt                   //打开文件并跳到第10行
vim -R /etc/passwd                     //以只读模式打开文件
```

#### 查看文件

```
cat a.txt          //查看文件最后一屏内容
less a.txt         //PgUp向上翻页，PgDn向下翻页，"q"退出查看
more a.txt         //显示百分比，回车查看下一行，空格查看下一页，"q"退出查看
tail -100 a.txt    //查看文件的后100行，"Ctrl+C"退出查看
```



### 文件权限

#### 权限说明

```
文件权限简介：'r' 代表可读（4），'w' 代表可写（2），'x' 代表执行权限（1），括号内代表"8421法"
##文件权限信息示例：-rwxrw-r--
-第一位：'-'就代表是文件，'d'代表是文件夹
-第一组三位：拥有者的权限
-第二组三位：拥有者所在的组，组员的权限
-第三组三位：代表的是其他用户的权限
```

#### 文件权限

```
普通授权    chmod +x a.txt    
8421法     chmod 777 a.txt     //1+2+4=7，"7"说明授予所有权限
```



### 打包与解压

#### 说明

```
.zip、.rar        //windows系统中压缩文件的扩展名
.tar              //Linux中打包文件的扩展名
.gz               //Linux中压缩文件的扩展名
.tar.gz           //Linux中打包并压缩文件的扩展名
```

#### 打包文件

```
tar -zcvf 打包压缩后的文件名 要打包的文件
参数说明：z：调用gzip压缩命令进行压缩; c：打包文件; v：显示运行过程; f：指定文件名;
示例：
tar -zcvf a.tar file1 file2,...      //多个文件压缩打包
```

#### 解压文件

```
tar -zxvf a.tar                      //解包至当前目录
tar -zxvf a.tar -C /usr------        //指定解压的位置
unzip test.zip             //解压*.zip文件 
unzip -l test.zip          //查看*.zip文件的内容 
```

### 其他常用命令

#### find

```
find . -name "*.c"     //将目前目录及其子目录下所有延伸档名是 c 的文件列出来
find . -type f         //将目前目录其其下子目录中所有一般文件列出
find . -ctime -20      //将目前目录及其子目录下所有最近 20 天内更新过的文件列出
find /var/log -type f -mtime +7 -ok rm {} \;     //查找/var/log目录中更改时间在7日以前的普通文件，并在删除之前询问它们
find . -type f -perm 644 -exec ls -l {} \;       //查找前目录中文件属主具有读、写权限，并且文件所属组的用户和其他用户具有读权限的文件
find / -type f -size 0 -exec ls -l {} \;         //为了查找系统中所有文件长度为0的普通文件，并列出它们的完整路径
```

#### whereis

```
whereis ls             //将和ls文件相关的文件都查找出来
```

#### which

```
说明：which指令会在环境变量$PATH设置的目录里查找符合条件的文件。
which bash             //查看指令"bash"的绝对路径
```

#### sudo

```
说明：sudo命令以系统管理者的身份执行指令，也就是说，经由 sudo 所执行的指令就好像是 root 亲自执行。需要输入自己账户密码。
使用权限：在 /etc/sudoers 中有出现的使用者
sudo -l                              //列出目前的权限
$ sudo -u yao vi ~www/index.html    //以 yao 用户身份编辑  home 目录下www目录中的 index.html 文件
```

#### grep

```
grep -i "the" demo_file              //在文件中查找字符串(不区分大小写)
grep -A 3 -i "example" demo_text     //输出成功匹配的行，以及该行之后的三行
grep -r "ramesh" *                   //在一个文件夹中递归查询包含指定字符串的文件
```

#### service

```
说明：service命令用于运行System V init脚本，这些脚本一般位于/etc/init.d文件下，这个命令可以直接运行这个文件夹里面的脚本，而不用加上路径
service ssh status      //查看服务状态 
service --status-all    //查看所有服务状态 
service ssh restart     //重启服务
```

#### free

```
说明：这个命令用于显示系统当前内存的使用情况，包括已用内存、可用内存和交换内存的情况 
free -g            //以G为单位输出内存的使用量，-g为GB，-m为MB，-k为KB，-b为字节 
free -t            //查看所有内存的汇总
```

#### top

```
top               //显示当前系统中占用资源最多的一些进程, shift+m 按照内存大小查看
```

#### df

```
说明：显示文件系统的磁盘使用情况
df -h            //一种易看的显示
```

#### mount

```
mount /dev/sdb1 /u01              //挂载一个文件系统，需要先创建一个目录，然后将这个文件系统挂载到这个目录上
dev/sdb1 /u01 ext2 defaults 0 2   //添加到fstab中进行自动挂载，这样任何时候系统重启的时候，文件系统都会被加载 
```

#### uname

```
说明：uname可以显示一些重要的系统信息，例如内核名称、主机名、内核版本号、处理器类型之类的信息 
uname -a
```

#### yum

```
说明：安装插件命令
yum install httpd      //使用yum安装apache 
yum update httpd       //更新apache 
yum remove httpd       //卸载/删除apache 
```

#### rpm

```
说明：插件安装命令
rpm -ivh httpd-2.2.3-22.0.1.el5.i386.rpm      //使用rpm文件安装apache 
rpm -uvh httpd-2.2.3-22.0.1.el5.i386.rpm      //使用rpm更新apache 
rpm -ev httpd                                 //卸载/删除apache 
```

#### date

```
date -s "01/31/2010 23:59:53"   ///设置系统时间
```

#### wget

```
说明：使用wget从网上下载软件、音乐、视频 
示例：wget http://prdownloads.sourceforge.net/sourceforge/nagios/nagios-3.2.1.tar.gz
//下载文件并以指定的文件名保存文件
wget -O nagios.tar.gz http://prdownloads.sourceforge.net/sourceforge/nagios/nagios-3.2.1.tar.gz
```

#### ftp

```
ftp IP/hostname    //访问ftp服务器
mls *.html -       //显示远程主机上文件列表
```

#### scp

```
scp /opt/data.txt  192.168.1.101:/opt/    //将本地opt目录下的data文件发送到192.168.1.101服务器的opt目录下
```



### 系统管理

#### 防火墙操作

```
service iptables status      //查看iptables服务的状态
service iptables start       //开启iptables服务
service iptables stop        //停止iptables服务
service iptables restart     //重启iptables服务
chkconfig iptables off       //关闭iptables服务的开机自启动
chkconfig iptables on        //开启iptables服务的开机自启动
##centos7 防火墙操作
systemctl status firewalld.service     //查看防火墙状态
systemctl stop firewalld.service       //关闭运行的防火墙
systemctl disable firewalld.service    //永久禁止防火墙服务
```

#### 修改主机名（CentOS 7）

```
hostnamectl set-hostname 主机名
```

#### 查看网络

```
ifconfig
```

#### 修改IP

```
修改网络配置文件，文件地址：/etc/sysconfig/network-scripts/ifcfg-eth0
------------------------------------------------
主要修改以下配置：  
TYPE=Ethernet               //网络类型
BOOTPROTO=static            //静态IP
DEVICE=ens00                //网卡名
IPADDR=192.168.1.100        //设置的IP
NETMASK=255.255.255.0       //子网掩码
GATEWAY=192.168.1.1         //网关
DNS1=192.168.1.1            //DNS
DNS2=8.8.8.8                //备用DNS
ONBOOT=yes                  //系统启动时启动此设置
-------------------------------------------------
修改保存以后使用命令重启网卡：service network restart
```

#### 配置映射

```
修改文件： vi /etc/hosts
在文件最后添加映射地址，示例如下：
192.168.1.101  node1
192.168.1.102  node2
192.168.1.103  node3
配置好以后保存退出，输入命令：ping node1 ，可见实际 ping 的是 192.168.1.101。
```

#### 查看进程

```
ps -ef         //查看所有正在运行的进程
```

#### 结束进程

```
kill pid       //杀死该pid的进程
kill -9 pid    //强制杀死该进程  
```

#### 查看端口

```
lsof -i:端口号
netstat -tunlp 用于显示 tcp，udp 的端口和进程等相关情况。
```



#### 查看链接

```
ping IP        //查看与此IP地址的连接情况
netstat -an    //查看当前系统端口
netstat -an | grep 8080     //查看指定端口
```

#### 快速清屏

```
ctrl+l        //清屏，往上翻可以查看历史操作
```

#### 远程主机

```
ssh IP       //远程主机，需要输入用户名和密码
```





## Linux常见面试问题：

#### 1‘ 绝对路径用什么符号表示？当前目录、上层目录用什么表示？主目录用什么表示? 切换目录用什么命令？

**答案：**
绝对路径： 如/etc/init.d
当前目录和上层目录： ./  ../
主目录： ~/
切换目录： cd

#### 2‘ 怎么查看当前进程？怎么执行退出？怎么查看当前路径？

**答案：**
查看当前进程： ps
执行退出： exit
查看当前路径： pwd

#### 3‘ 怎么清屏？怎么退出当前命令？怎么执行睡眠？怎么查看当前用户 id？查看指定帮助用什么命令？

清屏： clear
退出当前命令： ctrl+c 彻底退出
执行睡眠 ： ctrl+z 挂起当前进程 fg 恢复后台
查看当前用户 id： ”id“：查看显示目前登陆账户的 uid 和 gid 及所属分组及用户名
查看指定帮助： 如 man adduser 这个很全 而且有例子； adduser --help 这个告诉你一些常用参数； info adduesr；

#### 4’ Ls 命令执行什么功能？ 可以带哪些参数，有什么区别？

**答案：**
ls 执行的功能： 列出指定目录中的目录，以及文件
哪些参数以及区别： a 所有文件 l 详细信息，包括大小字节数，可读可写可执行的权限等

#### 5‘ 建立软链接(快捷方式)，以及硬链接的命令。

**答案：**
软链接： ln -s slink source
硬链接： ln link source

#### 6‘ 目录创建用什么命令？创建文件用什么命令？复制文件用什么命令？

创建目录： mkdir
创建文件：典型的如 touch，vi 也可以创建文件，其实只要向一个不存在的文件输出，都会创建文件
复制文件： cp 7. 文件权限修改用什么命令？格式是怎么样的？
文件权限修改： chmod

#### 7‘ 查看文件内容有哪些命令可以使用？

```
vi 文件名 #编辑方式查看，可修改

cat 文件名 #显示全部文件内容

more 文件名 #more功能类似 cat ，cat命令是整个文件的内容从上到下显示在屏幕上。 more会以一页一页的显示方便使用者逐页阅读，而最基本的指令就是按空白键（space）就往下一页显示，按 b 键就会往回（back）一页显示，而且还有搜寻字串的功能。more命令从前向后读取文件，因此在启动时就加载整个文件。

less 文件名 #less 工具也是对文件或其它输出进行分页显示的工具，应该说是linux正统查看文件内容的工具，功能极其强大。less 的用法比起 more 更加的有弹性。 在 more 的时候，我们并没有办法向前面翻， 只能往后面看，但若使用了 less 时，就可以使用 [pageup] [pagedown] 等按键的功能来往前往后翻看文件，更容易用来查看一个文件的内容！除此之外，在 less 里头可以拥有更多的搜索功能，不止可以向下搜，也可以向上搜。

tail 文件名 # tail工具，显示文件内容的最后几行。最后一条命令tail非常有用，尤其在监控日志文件时，可以在屏幕上一直显示新增的日志信息。

head 文件名 # 仅查看头部,还可以指定行数
```



#### 8‘ 随意写文件命令？怎么向屏幕输出带空格的字符串，比如”hello world”?

写文件命令：vi

向屏幕输出带空格的字符串:echo hello world

#### 9' 终端是哪个文件夹下的哪个文件？黑洞文件是哪个文件夹下的哪个命令？

**答案：**
终端 /dev/tty

黑洞文件 /dev/null



#### 10' 移动文件用哪个命令？改名用哪个命令？

**答案：**
mv mv



#### 11' 复制文件用哪个命令？如果需要连同文件夹一块复制呢？如果需要有提示功能呢？

**答案：**
cp cp -r  ？？？？



#### 12' 删除文件用哪个命令？如果需要连目录及目录下文件一块删除呢？删除空文件夹用什么命令？

**答案：**
rm rm -r rmdir



#### 13' Linux 下命令有哪几种可使用的通配符？分别代表什么含义?

“？”可替代单个字符。

“*”可替代任意多个字符。

方括号“[charset]”可替代 charset 集中的任何单个字符，如[a-z]，[abABC]



#### 14' 用什么命令对一个文件的内容进行统计？(行号、单词数、字节数)

**答案：**

wc 命令 - c 统计字节数 - l 统计行数 - w 统计字数。



#### 15' 用什么命令对一个文件的内容进行统计？(行号、单词数、字节数)

**答案：**

wc 命令 - c 统计字节数 - l 统计行数 - w 统计字数。



#### 16' Grep 命令有什么用？ 如何忽略大小写？ 如何查找不含该串的行?

是一种强大的文本搜索工具，它能使用正则表达式搜索文本，并把匹配的行打印出来。



#### 17' Linux 中进程有哪几种状态？在 ps 显示出来的信息中，分别用什么符号表示的？

D 不可中断 Uninterruptible（usually IO）
R 正在运行，或在队列中的进程
S 处于休眠状态
T 停止或被追踪
Z 僵尸进程
W 进入内存交换（从内核 2.6 开始无效）
X 死掉的进程



#### 18' 怎么使一个命令在后台运行?

一般都是使用 & 在命令结尾来让程序自动运行。(命令后可以不追加空格)

#### 19' 利用 ps 怎么显示所有的进程? 怎么利用 ps 查看指定进程的信息？

ps -ef (system v 输出) 

ps -aux bsd 格式输出

ps -ef | grep pid

#### 20' 哪个命令专门用来查看后台任务? 

job -l

#### 21' 把后台任务调到前台执行使用什么命令?把停下的后台任务在后台执行起来用什么命令?

把后台任务调到前台执行 fg。把停下的后台任务在后台执行起来 bg

#### 22‘ 终止进程用什么命令? 带什么参数? 

kill [-s <信息名称或编号>][程序] 或 kill [-l <信息编号>]  kill-9 pid

#### 23‘ 怎么查看系统支持的所有信号？



#### 24‘ 搜索文件用什么命令? 格式是怎么样的? 

find <指定目录> <指定条件> <指定动作>

whereis 加参数与文件名

locate 只加文件名

find 直接搜索磁盘，较慢。

find / -name "string*"



#### 25‘ 查看当前谁在使用该主机用什么命令? 查找自己所在的终端信息用什么命令?

查找自己所在的终端信息：who am i

查看当前谁在使用该主机：who



#### 26‘ 使用什么命令查看用过的命令列表?

history



#### 27‘ 使用什么命令查看磁盘使用空间？ 空闲空间呢?

df -hl
文件系统 容量 已用 可用 已用% 挂载点
Filesystem Size Used Avail Use% Mounted on /dev/hda2 45G 19G 24G 44% /
/dev/hda1 494M 19M 450M 4% /boot



#### 28‘ 使用什么命令查看网络是否连通?

netstat



#### 29‘ 使用什么命令查看 ip 地址及接口信息？

ifconfig



#### 30‘ 查看各类环境变量用什么命令?

查看所有 env
查看某个，如 home： env $HOME



#### 31‘ 通过什么命令指定命令提示符?

```
\u：显示当前用户账号
\h：显示当前主机名
\W：只显示当前路径最后一个目录
\w：显示当前绝对路径（当前用户目录会以~代替）
$PWD：显示当前全路径
$：显示命令行’$'或者’#'符号
\#：下达的第几个命令
\d：代表日期，格式为week day month date，例如："MonAug1"
\t：显示时间为24小时格式，如：HH：MM：SS
\T：显示时间为12小时格式
\A：显示时间为24小时格式：HH：MM
\v：BASH的版本信息 如export PS1=’[\u@\h\w\#]$‘
```



#### 32' 查找命令的可执行文件是去哪查找的? 怎么对其进行设置及添加? 

whereis [-bfmsu][-B <目录>...][-M <目录>...][-S <目录>...][文件...]

补充说明：whereis 指令会在特定目录中查找符合条件的文件。这些文件的烈性应属于原始代码，二进制文件，或是帮助文件。



#### 33‘ 通过什么命令查找执行命令?

which 只能查可执行文件

whereis 只能查二进制文件、说明文档，源文件等



#### 34‘ 怎么对命令进行取别名？

alias la='ls -a'



#### 35‘ du 和 df 的定义，以及区别？

du 显示目录或文件的大小

df 显示每个<文件>所在的文件系统的信息，默认是显示所有文件系统。
（文件系统分配其中的一些磁盘块用来记录它自身的一些数据，如 i 节点，磁盘分布图，间接块，超级块等。这些数据对大多数用户级的程序来说是不可见的，通常称为 Meta Data。） du 命令是用户级的程序，它不考虑 Meta Data，而 df 命令则查看文件系统的磁盘分配图并考虑 Meta Data。
df 命令获得真正的文件系统数据，而 du 命令只查看文件系统的部分情况。



#### 36‘ awk



#### 37‘ 当你需要给命令绑定一个宏或者按键的时候，应该怎么做呢？



#### 38‘ 如果一个linux新手想要知道当前系统支持的所有命令的列表，他需要怎么做？



#### 39‘ 如果你的助手想要打印出当前的目录栈，你会建议他怎么做？

dirs打印当前目录。 



#### 40‘ bash shell 中的hash 命令有什么作用？

linux命令’hash’管理着一个内置的哈希表，记录了已执行过的命令的完整路径, 用该命令可以打印出你所使用过的命令以及执行的次数。



#### 41‘ 哪一个bash内置命令能够进行数学运算。

bash shell 的内置命令let 可以进行整型数的数学运算。



#### 42‘ 怎样一页一页地查看一个大文件的内容呢？

通过管道将命令”cat file_name.txt” 和 ’more’ 连接在一起可以实现这个需要。Shell可以将两个或者多个命令（程序或者进程）连接到一起，把一个命令的输出作为下一个命令的输入，以这种方式连接的两个或者多个命令就形成了**管道（pipe）**。

```bash
[root@localhost ~]# cat file_name.txt | more
```



#### 43‘ 数据字典属于哪一个用户的？

数据字典是属于’SYS’用户的，用户‘SYS’ 和 ’SYSEM’是由系统默认自动创建的



#### 44‘ 怎样查看一个linux命令的概要与用法？假设你在/bin目录中偶然看到一个你从没见过的的命令，怎样才能知道它的作用和用法呢？

使用命令what is 可以先出显示出这个命令的用法简要.



#### 45' linux (ubuntu, centos)查看、修改文件所属用户和用户组

查看文件及其所属的用户和用户组

```
ll 
```

如果想要修改某个文件所属的用户和用户组，需要使用chown命令，通过以下命令可以修改文件所属用户组：

```
chown username file
```

其中，username为修改后文件所属的用户，file为想要操作的文件。

通过以下命令可以同时修改文件所属用户组和用户：

```
chown username:username file
```











